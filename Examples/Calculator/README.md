The Calculator Application
===========

This application is a simple Android Calculator application that has two modes: Simple and
Scientific mode. Each mode is represented by an Activity.

The application illustrates JPF-Android input script and how it can be used to drive the execution of the application on JPF. 

The application can be used to detect an Arithmetic exception, using jpf-android,
that is thrown by the application when we divide by zero or asks for the
square root of a negative number. Lastly it can detect a NullPointer
dereferencing exception when sending data between Activities.

Dependencies
-----------

For the application to compile and run as an Android application from the command line / from Eclipse the following is required: 

 - The project makes use of [EvalEx](https://github.com/uklimaschewski/EvalEx), a Java Expression Evaluator to parse and evaluate expressions. This library needs to be downloaded, packaged into a jar and placed in the libs folder of the application.

 - The project also depends on the jpf-android Checkpoint annotation found in the `jpf-android-annotaions.jar` file that is generated by jpf-android during the `src-dist` gradle task. 




Building
--------
Although this project has the old Java application package structure used by the Android Eclipse plugin, the tool makes use of `gradle` as a build tool. 


** Eclipse:**

 1. Install the [Android ADT plugin](http://developer.android.com/sdk) for Eclipse and download Android SDK 19.

 2. Install the Egit plugin for Eclipse.

 3. Install the Eclipse [gradle plugin](https://github.com/spring-projects/eclipse-integration-gradle). ([update site](http://dist.springsource.com/milestone/TOOLS/gradle)).

 4. For the application to be built in Eclipse, you need to create a `local.properties` file in the project directory containing the location of the Android SDK:

	`sdk.dir=<path>`

 5. Generate the Eclipse project files using gradle:

	```
	~$ ./gradlew
	~$ gradle eclipse
	```
 

 6. Import the Calculator Android project into Eclipse as an Android application.

 
** From the command line:**

`gradle`, a wrapper is provided. To build and install the tool, run

```
~$ ./gradlew
~$ gradle build
```




Running
-----

This project can either be executed as an Android application or it can be verified and tested on JPF or on the device.


** Running as an Android application: **

Right Click on project and select `Run As`->`Android Application`.


** Running on JPF-Android: **

 - Make sure the location of JPF-Android and JPF-CORE is specified in you site.properties file.
 - Import JPF-Core into Eclipse as a Java project.
 - Import JPF-Android from the location `jpf-android/jpf-android/` into Eclipse as a Java project.
 
The simplest way to run JPF-Android is to install the jpf eclipse plug-in from [here](http://babelfish.arc.nasa.gov/trac/jpf/wiki/install/eclipse-plugin)
            
Right click on a .jpf file. Select the Verify option and the verification process of the system specified in the .jpf file begins.

** Running monkeyrunner tests: **

** Running UI Automator tests: **

** Running JUnit tests: **

** Translating JPF-core script to monkeyrunner: **


Common Issues
--------------



License
-------

This sowtware is distributed under the terms of the Apache Software License 2.0.
See the LICENSE file for further details.
